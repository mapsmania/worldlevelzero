<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Generate Country Label GeoJSON</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    pre { background: #f4f4f4; padding: 10px; border-radius: 6px; overflow: auto; max-height: 500px; }
  </style>
</head>
<body>
  <h1>Generate Country Label GeoJSON</h1>
  <p>Open the console (F12) to see the generated GeoJSON or copy from the textarea below.</p>
  <textarea id="output" cols="100" rows="20"></textarea>

  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
  <script>
    // 1. Your list of countries
    const countryNames = [
      "Costa Rica","Nicaragua","Haiti","Dominican Rep.","El Salvador","Guatemala","Cuba",
      "Honduras","United States of America","Canada","Mexico","Belize","Panama","Greenland",
      "Bahamas","Trinidad and Tobago","Puerto Rico","Jamaica","Indonesia","Malaysia","Cyprus",
      "India","China","Israel","Palestine","Lebanon","Syria","South Korea","North Korea",
      "Bhutan","Oman","Uzbekistan","Kazakhstan","Tajikistan","Mongolia","Vietnam","Cambodia",
      "United Arab Emirates","Georgia","Azerbaijan","Turkey","Laos","Kyrgyzstan","Armenia",
      "Iraq","Iran","Qatar","Saudi Arabia","Pakistan","Thailand","Kuwait","Timor-Leste",
      "Brunei","Myanmar","Bangladesh","Afghanistan","Turkmenistan","Jordan","Nepal","Yemen",
      "N. Cyprus","Philippines","Sri Lanka","Taiwan","Japan","Chile","Bolivia","Peru","Argentina",
      "Suriname","Guyana","Brazil","Uruguay","Ecuador","Colombia","Paraguay","Venezuela",
      "Falkland Is.","Ethiopia","S. Sudan","Somalia","Kenya","Malawi","Tanzania","Somaliland",
      "Morocco","W. Sahara","Congo","Dem. Rep. Congo","Namibia","South Africa","Libya",
      "Tunisia","Zambia","Sierra Leone","Guinea","Liberia","Central African Rep.","Sudan",
      "Djibouti","Eritrea","CÃ´te d'Ivoire","Mali","Senegal","Nigeria","Benin","Angola",
      "Botswana","Zimbabwe","Chad","Algeria","Mozambique","eSwatini","Burundi","Rwanda",
      "Uganda","Lesotho","Cameroon","Gabon","Niger","Burkina Faso","Togo","Ghana",
      "Guinea-Bissau","Egypt","Mauritania","Eq. Guinea","Gambia","Madagascar","France",
      "Ukraine","Belarus","Lithuania","Russia","Czechia","Germany","Estonia","Latvia",
      "Norway","Sweden","Finland","Luxembourg","Belgium","North Macedonia","Albania","Kosovo",
      "Spain","Denmark","Romania","Hungary","Slovakia","Poland","Ireland","United Kingdom",
      "Greece","Austria","Italy","Switzerland","Netherlands","Serbia","Croatia","Slovenia",
      "Bulgaria","Montenegro","Bosnia and Herz.","Portugal","Moldova","Iceland","Papua New Guinea",
      "Australia","Fiji","New Zealand","New Caledonia","Solomon Is.","Vanuatu","Antarctica",
      "Fr. S. Antarctic Lands"
    ];

    // 2. Fetch centroids dataset
    fetch("https://cdn.jsdelivr.net/gh/gavinr/world-countries-centroids@v1/dist/countries.geojson")
      .then(res => res.json())
      .then(data => {
        // Build lookup map
        const lookup = {};
        data.features.forEach(f => {
          const country = f.properties.COUNTRY.trim();
          lookup[country] = f.geometry.coordinates;
        });

        // Build GeoJSON
        const labelGeoJSON = {
          type: "FeatureCollection",
          features: []
        };

        countryNames.forEach(name => {
          const coords = lookup[name];
          if (coords) {
            labelGeoJSON.features.push({
              type: "Feature",
              geometry: { type: "Point", coordinates: coords },
              properties: { name }
            });
          } else {
            console.warn("No centroid found for:", name);
          }
        });

        // Output JSON
        const outputEl = document.getElementById("output");
        outputEl.value = JSON.stringify(labelGeoJSON, null, 2);
        console.log("Generated GeoJSON:", labelGeoJSON);
      })
      .catch(err => console.error("Failed to load centroids dataset:", err));
  </script>
</body>
</html>
